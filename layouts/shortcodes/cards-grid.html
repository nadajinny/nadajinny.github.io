{{/* layouts/shortcodes/cards-grid.html */}}
{{ $type := .Get "type" | default "a" }}
{{ $count := int (.Get "count" | default "6") }}
{{ $typesParam := .Get "types" | default "" }}
{{ $types := slice }}
{{ if $typesParam }}
  {{ range $idx, $val := split $typesParam "," }}
    {{ $trimmed := trim $val " " }}
    {{ if $trimmed }}
      {{ $types = $types | append $trimmed }}
    {{ end }}
  {{ end }}
{{ end }}


{{/* 예시용 Unsplash 이미지 6개 */}}
{{ $unsplash := slice
  "https://images.unsplash.com/photo-1552068751-34cb5cf055b3?auto=format&fit=crop&q=80&w=1065"
  "https://images.unsplash.com/photo-1759752783876-a7016334eb34?auto=format&fit=crop&q=80&w=1010"
  "https://images.unsplash.com/photo-1576091160550-2173dba999ef?auto=format&fit=crop&q=80&w=2070"
}}

<style>
  /* ✅ 공통 Overlay 및 Hover 버튼 효과 */
  .overlay-card {
    position: relative;
    overflow: hidden;
    border-radius: 0.75rem;
    box-shadow: 0 4px 14px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .overlay-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.25);
  }
  .overlay-card img {
    width: 100%;
    height: 230px;
    object-fit: cover;
    display: block;
    transition: transform 0.5s ease;
  }
  .overlay-card:hover img {
    transform: scale(1.05);
  }
  .overlay-layer {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.4); /* ✅ 투명도 레이어 */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: white;
    padding: 20px;
    opacity: 0;
    transition: opacity 0.4s ease;
  }
  .overlay-card:hover .overlay-layer {
    opacity: 1;
  }
  .overlay-btn {
    background-color: #B7C3F2;
    color: white;
    padding: 8px 18px;
    border-radius: 6px;
    margin-top: 10px;
    font-weight: 500;
    transition: all 0.3s ease;
  }
  .overlay-btn:hover {
    background-color: #D5B8F2;
    transform: scale(1.08);
  }
</style>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
  {{ if gt (len $types) 0 }}
    {{ range $idx, $itemType := $types }}
      {{ $img := index $unsplash (mod $idx (len $unsplash)) }}
      {{ $number := add $idx 1 }}

      {{- with $itemType -}}
        {{- if eq . "a" -}}
          <article class="overlay-card bg-white">
            <img src="{{ $img }}" alt="Chatterpals">
            <div class="overlay-layer">
              <a href="/project/" class="overlay-btn">Details</a>
            </div>
            <div class="p-4 text-gray-700 text-sm text-justify">
              <h3 class="font-semibold text-lg mb-2 text-center">Chatterpals</h3>
            </div>
          </article>

        {{- else if eq . "b" -}}
          <article class="overlay-card bg-white">
            <img src="{{ $img }}" alt="Read&Lead">
            <div class="overlay-layer">
              <a href="/project/" class="overlay-btn">Details</a>
            </div>
            <div class="p-4 text-gray-700 text-sm text-justify">
              <h3 class="font-semibold text-lg mb-2 text-center">Read&Lead</h3>
            </div>
          </article>

        {{- else if eq . "c" -}}
          <article class="overlay-card bg-white">
            <img src="{{ $img }}" alt="Medi-Mate">
            <div class="overlay-layer">
              <a href="/project/" class="overlay-btn">Details</a>
            </div>
            <div class="p-4 text-gray-700 text-sm text-justify">
              <h3 class="font-semibold text-lg mb-2 text-center">Medi-Mate</h3>
            </div>
          </article>

        {{- else -}}
          <article class="overlay-card bg-transparent">
            <img src="{{ $img }}" alt="Card Image {{ $number }}">
            <div class="overlay-layer">
              <a href="/project" class="overlay-btn">Details</a>
            </div>
            <h4 class="mt-2 font-medium text-center">Gallery {{ $number }}</h4>
          </article>
        {{- end -}}
      {{- end -}}
    {{ end }}
  {{ else }}
    {{ range $i := seq 1 $count }}
      {{ $img := index $unsplash (mod $i (len $unsplash)) }}
      <article class="overlay-card bg-white">
        <img src="{{ $img }}" alt="Project {{ $i }}">
        <div class="overlay-layer">
          <a href="/project" class="overlay-btn">Details</a>
        </div>
        <div class="p-4 text-gray-700 text-sm text-justify">
          <h3 class="font-semibold text-lg mb-2 text-center">Project {{ $i }}</h3>
          This is a summary of ongoing AI and data science research projects.  
          The goal is to bridge development with real-world applications.
        </div>
      </article>
    {{ end }}
  {{ end }}
</div>
